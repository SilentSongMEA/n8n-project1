{
  "name": "My workflow",
  "nodes": [
    {
      "parameters": {
        "public": true,
        "mode": "webhook",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        0,
        -48
      ],
      "id": "80e951a2-cedb-4708-8028-a7e465f11d5f",
      "name": "When chat message received",
      "webhookId": "693cbf70-ef93-4b5c-9c7e-34278d7550c4"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "شما دستیار فروش هوش مصنوعی فروشگاه آنلاین \"Victor\" هستید.  \nاین فروشگاه محصولات تکنولوژی باکیفیت می‌فروشد از جمله:  \n- گوشی‌های هوشمند (مثل iPhone، Samsung Galaxy و ...)  \n- لپ‌تاپ‌ها (MacBook، Dell، HP و ...)  \n- ساعت‌های هوشمند  \n- عینک‌های هوشمند / عینک‌های واقعیت مجازی  \n- ایرپاد و هندزفری‌های بی‌سیم  \n- هدفون‌ها  \n- سایر گجت‌های هوشمند  \n\nوظایف شما:  \n1. به تمام سوالات مشتریان درباره محصولات، قیمت، موجودی و مشخصات پاسخ دهید.  \n2. همیشه نام دقیق محصول، قیمت و تصویر واقعی و مرتبط با محصول را ارائه کنید. (مثال: اگر مشتری آیفون 16 را خواست، باید عکس واقعی آیفون 16 و قیمت صحیح آن نمایش داده شود.)  \n3. در پاسخ‌ها حرفه‌ای، شفاف و دوستانه باشید.  \n4. **ابتدا اطلاعات را از دیتاست اصلی (Kaggle یا لیست داخلی محصولات) واکشی کن.**  \n5. **اگر محصول در دیتاست اصلی پیدا نشد، به عنوان مرحله دوم برو از Google Sheets اطلاعات محصول (نام، قیمت، توضیحات، تصویر) را جستجو کن و نمایش بده.**  \n6. اگر در Google Sheets هم موجود نبود، محصول مشابه واقعی را پیشنهاد بده.  \n7. می‌توانید محصولات را مقایسه کنید، جایگزین پیشنهاد دهید یا بهترین انتخاب را براساس نیاز مشتری معرفی کنید.  \n8. پاسخ‌ها کوتاه، مفید و کاربرپسند باشند.  \n9. لحن پاسخ‌ها متناسب با طراحی سایت باشد (مینیمال، مدرن، مشکی و سفید، تمیز و حرفه‌ای).  \n10. زبان سوال مشتری را تشخیص دهید: اگر سوال به فارسی بود، پاسخ را فارسی بدهید؛ اگر سوال به انگلیسی بود، پاسخ را انگلیسی بدهید.  \n",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        280,
        -48
      ],
      "id": "364d8ad8-0881-4fd2-a57d-08499897aa03",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "operation": "getAll",
        "tableId": "="
      },
      "type": "n8n-nodes-base.supabaseTool",
      "typeVersion": 1,
      "position": [
        352,
        176
      ],
      "id": "7c553874-e8bf-4991-b8cb-4b89f9d4afcf",
      "name": "Get many rows in Supabase",
      "credentials": {
        "supabaseApi": {
          "id": "GgDYDbp5KuJmx3ma",
          "name": "Supabase account 2"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1kW-7vamJAuPeyuPIZFolH-wzU8mFR--8DECJu9L7Pso",
          "mode": "list",
          "cachedResultName": "phones_data1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1kW-7vamJAuPeyuPIZFolH-wzU8mFR--8DECJu9L7Pso/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 768800010,
          "mode": "list",
          "cachedResultName": "phone",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1kW-7vamJAuPeyuPIZFolH-wzU8mFR--8DECJu9L7Pso/edit#gid=768800010"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.7,
      "position": [
        480,
        176
      ],
      "id": "a71487c5-196d-4aa1-b6ac-3fcbdf5922db",
      "name": "Get row(s) in sheet in Google Sheets",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "VDkwHr0wpRq8v6Sz",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        144,
        160
      ],
      "id": "e20990bc-ed37-40ce-b36e-60cc7a1fbfe9",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "vlWqpe99MiXcRMSy",
          "name": "OpenAi account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get many rows in Supabase": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet in Google Sheets": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "c9060e7e-744e-432b-a6d2-fa1c8620372d",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "d5efcb8afe40448108006c8986507b2ef709b756a81b598f8f5ec9a399e13728"
  },
  "id": "OVtibk2VtOzzCpVi",
  "tags": []
}